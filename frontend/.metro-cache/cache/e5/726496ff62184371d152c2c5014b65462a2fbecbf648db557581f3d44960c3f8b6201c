{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":53,"index":213}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":214},"end":{"line":4,"column":34,"index":248}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _expoRouter = require(_dependencyMap[2], \"expo-router\");\n  var _servicesApi = require(_dependencyMap[3], \"../services/api\");\n  var api = _interopDefault(_servicesApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    const router = (0, _expoRouter.useRouter)();\n    const segments = (0, _expoRouter.useSegments)();\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    (0, _react.useEffect)(() => {\n      if (isLoading) return;\n      const inAuthGroup = segments[0] === '(tabs)';\n      if (!user && inAuthGroup) {\n        router.replace('/login');\n      } else if (user && !inAuthGroup && segments[0] !== 'index') {\n        router.replace('/(tabs)/home');\n      }\n    }, [user, segments, isLoading]);\n    const checkAuth = async () => {\n      try {\n        const sessionToken = await AsyncStorage.default.getItem('session_token');\n        if (sessionToken) {\n          api.default.defaults.headers.common['Authorization'] = `Bearer ${sessionToken}`;\n          const response = await api.default.get('/auth/me');\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.log('Auth check failed:', error);\n        await AsyncStorage.default.removeItem('session_token');\n        delete api.default.defaults.headers.common['Authorization'];\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const processSessionId = async sessionId => {\n      setIsLoading(true);\n      try {\n        const response = await api.default.post('/auth/session', {\n          session_id: sessionId\n        });\n        if (response.data.success) {\n          const {\n            user: userData,\n            session_token\n          } = response.data;\n          await AsyncStorage.default.setItem('session_token', session_token);\n          api.default.defaults.headers.common['Authorization'] = `Bearer ${session_token}`;\n          setUser(userData);\n          router.replace('/(tabs)/home');\n        }\n      } catch (error) {\n        console.error('Session exchange failed:', error);\n        router.replace('/login');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = () => {\n      router.push('/login');\n    };\n    const logout = async () => {\n      try {\n        await api.default.post('/auth/logout');\n      } catch (error) {\n        console.log('Logout API error:', error);\n      }\n      await AsyncStorage.default.removeItem('session_token');\n      delete api.default.defaults.headers.common['Authorization'];\n      setUser(null);\n      router.replace('/login');\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        login,\n        logout,\n        processSessionId\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"wtZDdsvEJ2xQfzLzQ5GMeyqbDUY=\", false, function () {\n    return [_expoRouter.useRouter, _expoRouter.useSegments];\n  });\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":128,"map":[[15,2,24,0,"exports"],[15,9,24,0],[15,10,24,0,"AuthProvider"],[15,22,24,0],[15,25,24,0,"AuthProvider"],[15,37,24,0],[16,2,111,0,"exports"],[16,9,111,0],[16,10,111,0,"useAuth"],[16,17,111,0],[16,20,111,0,"useAuth"],[16,27,111,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_expoRouter"],[20,17,3,0],[20,20,3,0,"require"],[20,27,3,0],[20,28,3,0,"_dependencyMap"],[20,42,3,0],[21,2,4,0],[21,6,4,0,"_servicesApi"],[21,18,4,0],[21,21,4,0,"require"],[21,28,4,0],[21,29,4,0,"_dependencyMap"],[21,43,4,0],[22,2,4,0],[22,6,4,0,"api"],[22,9,4,0],[22,12,4,0,"_interopDefault"],[22,27,4,0],[22,28,4,0,"_servicesApi"],[22,40,4,0],[23,2,4,34],[23,6,4,34,"_reactJsxDevRuntime"],[23,25,4,34],[23,28,4,34,"require"],[23,35,4,34],[23,36,4,34,"_dependencyMap"],[23,50,4,34],[24,2,22,0],[24,8,22,6,"AuthContext"],[24,19,22,17],[24,35,22,20],[24,39,22,20,"createContext"],[24,45,22,33],[24,46,22,33,"createContext"],[24,59,22,33],[24,61,22,63,"undefined"],[24,70,22,72],[24,71,22,73],[25,2,24,7],[25,11,24,16,"AuthProvider"],[25,23,24,28,"AuthProvider"],[25,24,24,29],[26,4,24,31,"children"],[27,2,24,65],[27,3,24,66],[27,5,24,68],[28,4,24,68,"_s"],[28,6,24,68],[29,4,25,2],[29,10,25,8],[29,11,25,9,"user"],[29,15,25,13],[29,17,25,15,"setUser"],[29,24,25,22],[29,25,25,23],[29,28,25,26],[29,32,25,26,"useState"],[29,38,25,34],[29,39,25,34,"useState"],[29,47,25,34],[29,49,25,48],[29,53,25,52],[29,54,25,53],[30,4,26,2],[30,10,26,8],[30,11,26,9,"isLoading"],[30,20,26,18],[30,22,26,20,"setIsLoading"],[30,34,26,32],[30,35,26,33],[30,38,26,36],[30,42,26,36,"useState"],[30,48,26,44],[30,49,26,44,"useState"],[30,57,26,44],[30,59,26,45],[30,63,26,49],[30,64,26,50],[31,4,27,2],[31,10,27,8,"router"],[31,16,27,14],[31,19,27,17],[31,23,27,17,"useRouter"],[31,34,27,26],[31,35,27,26,"useRouter"],[31,44,27,26],[31,46,27,27],[31,47,27,28],[32,4,28,2],[32,10,28,8,"segments"],[32,18,28,16],[32,21,28,19],[32,25,28,19,"useSegments"],[32,36,28,30],[32,37,28,30,"useSegments"],[32,48,28,30],[32,50,28,31],[32,51,28,32],[33,4,30,2],[33,8,30,2,"useEffect"],[33,14,30,11],[33,15,30,11,"useEffect"],[33,24,30,11],[33,26,30,12],[33,32,30,18],[34,6,31,4,"checkAuth"],[34,15,31,13],[34,16,31,14],[34,17,31,15],[35,4,32,2],[35,5,32,3],[35,7,32,5],[35,9,32,7],[35,10,32,8],[36,4,34,2],[36,8,34,2,"useEffect"],[36,14,34,11],[36,15,34,11,"useEffect"],[36,24,34,11],[36,26,34,12],[36,32,34,18],[37,6,35,4],[37,10,35,8,"isLoading"],[37,19,35,17],[37,21,35,19],[38,6,37,4],[38,12,37,10,"inAuthGroup"],[38,23,37,21],[38,26,37,24,"segments"],[38,34,37,32],[38,35,37,33],[38,36,37,34],[38,37,37,35],[38,42,37,40],[38,50,37,48],[39,6,39,4],[39,10,39,8],[39,11,39,9,"user"],[39,15,39,13],[39,19,39,17,"inAuthGroup"],[39,30,39,28],[39,32,39,30],[40,8,40,6,"router"],[40,14,40,12],[40,15,40,13,"replace"],[40,22,40,20],[40,23,40,21],[40,31,40,29],[40,32,40,30],[41,6,41,4],[41,7,41,5],[41,13,41,11],[41,17,41,15,"user"],[41,21,41,19],[41,25,41,23],[41,26,41,24,"inAuthGroup"],[41,37,41,35],[41,41,41,39,"segments"],[41,49,41,47],[41,50,41,48],[41,51,41,49],[41,52,41,50],[41,57,41,55],[41,64,41,62],[41,66,41,64],[42,8,42,6,"router"],[42,14,42,12],[42,15,42,13,"replace"],[42,22,42,20],[42,23,42,21],[42,37,42,35],[42,38,42,36],[43,6,43,4],[44,4,44,2],[44,5,44,3],[44,7,44,5],[44,8,44,6,"user"],[44,12,44,10],[44,14,44,12,"segments"],[44,22,44,20],[44,24,44,22,"isLoading"],[44,33,44,31],[44,34,44,32],[44,35,44,33],[45,4,46,2],[45,10,46,8,"checkAuth"],[45,19,46,17],[45,22,46,20],[45,28,46,20,"checkAuth"],[45,29,46,20],[45,34,46,32],[46,6,47,4],[46,10,47,8],[47,8,48,6],[47,14,48,12,"sessionToken"],[47,26,48,24],[47,29,48,27],[47,35,48,33,"AsyncStorage"],[47,47,48,45],[47,48,48,45,"default"],[47,55,48,45],[47,56,48,46,"getItem"],[47,63,48,53],[47,64,48,54],[47,79,48,69],[47,80,48,70],[48,8,50,6],[48,12,50,10,"sessionToken"],[48,24,50,22],[48,26,50,24],[49,10,51,8,"api"],[49,13,51,11],[49,14,51,11,"default"],[49,21,51,11],[49,22,51,12,"defaults"],[49,30,51,20],[49,31,51,21,"headers"],[49,38,51,28],[49,39,51,29,"common"],[49,45,51,35],[49,46,51,36],[49,61,51,51],[49,62,51,52],[49,65,51,55],[49,75,51,65,"sessionToken"],[49,87,51,77],[49,89,51,79],[50,10,53,8],[50,16,53,14,"response"],[50,24,53,22],[50,27,53,25],[50,33,53,31,"api"],[50,36,53,34],[50,37,53,34,"default"],[50,44,53,34],[50,45,53,35,"get"],[50,48,53,38],[50,49,53,39],[50,59,53,49],[50,60,53,50],[51,10,54,8,"setUser"],[51,17,54,15],[51,18,54,16,"response"],[51,26,54,24],[51,27,54,25,"data"],[51,31,54,29],[51,32,54,30],[52,8,55,6],[53,6,56,4],[53,7,56,5],[53,8,56,6],[53,15,56,13,"error"],[53,20,56,18],[53,22,56,20],[54,8,57,6,"console"],[54,15,57,13],[54,16,57,14,"log"],[54,19,57,17],[54,20,57,18],[54,40,57,38],[54,42,57,40,"error"],[54,47,57,45],[54,48,57,46],[55,8,58,6],[55,14,58,12,"AsyncStorage"],[55,26,58,24],[55,27,58,24,"default"],[55,34,58,24],[55,35,58,25,"removeItem"],[55,45,58,35],[55,46,58,36],[55,61,58,51],[55,62,58,52],[56,8,59,6],[56,15,59,13,"api"],[56,18,59,16],[56,19,59,16,"default"],[56,26,59,16],[56,27,59,17,"defaults"],[56,35,59,25],[56,36,59,26,"headers"],[56,43,59,33],[56,44,59,34,"common"],[56,50,59,40],[56,51,59,41],[56,66,59,56],[56,67,59,57],[57,6,60,4],[57,7,60,5],[57,16,60,14],[58,8,61,6,"setIsLoading"],[58,20,61,18],[58,21,61,19],[58,26,61,24],[58,27,61,25],[59,6,62,4],[60,4,63,2],[60,5,63,3],[61,4,65,2],[61,10,65,8,"processSessionId"],[61,26,65,24],[61,29,65,27],[61,35,65,34,"sessionId"],[61,44,65,51],[61,48,65,56],[62,6,66,4,"setIsLoading"],[62,18,66,16],[62,19,66,17],[62,23,66,21],[62,24,66,22],[63,6,67,4],[63,10,67,8],[64,8,68,6],[64,14,68,12,"response"],[64,22,68,20],[64,25,68,23],[64,31,68,29,"api"],[64,34,68,32],[64,35,68,32,"default"],[64,42,68,32],[64,43,68,33,"post"],[64,47,68,37],[64,48,68,38],[64,63,68,53],[64,65,68,55],[65,10,68,57,"session_id"],[65,20,68,67],[65,22,68,69,"sessionId"],[66,8,68,79],[66,9,68,80],[66,10,68,81],[67,8,70,6],[67,12,70,10,"response"],[67,20,70,18],[67,21,70,19,"data"],[67,25,70,23],[67,26,70,24,"success"],[67,33,70,31],[67,35,70,33],[68,10,71,8],[68,16,71,14],[69,12,71,16,"user"],[69,16,71,20],[69,18,71,22,"userData"],[69,26,71,30],[70,12,71,32,"session_token"],[71,10,71,46],[71,11,71,47],[71,14,71,50,"response"],[71,22,71,58],[71,23,71,59,"data"],[71,27,71,63],[72,10,73,8],[72,16,73,14,"AsyncStorage"],[72,28,73,26],[72,29,73,26,"default"],[72,36,73,26],[72,37,73,27,"setItem"],[72,44,73,34],[72,45,73,35],[72,60,73,50],[72,62,73,52,"session_token"],[72,75,73,65],[72,76,73,66],[73,10,74,8,"api"],[73,13,74,11],[73,14,74,11,"default"],[73,21,74,11],[73,22,74,12,"defaults"],[73,30,74,20],[73,31,74,21,"headers"],[73,38,74,28],[73,39,74,29,"common"],[73,45,74,35],[73,46,74,36],[73,61,74,51],[73,62,74,52],[73,65,74,55],[73,75,74,65,"session_token"],[73,88,74,78],[73,90,74,80],[74,10,76,8,"setUser"],[74,17,76,15],[74,18,76,16,"userData"],[74,26,76,24],[74,27,76,25],[75,10,77,8,"router"],[75,16,77,14],[75,17,77,15,"replace"],[75,24,77,22],[75,25,77,23],[75,39,77,37],[75,40,77,38],[76,8,78,6],[77,6,79,4],[77,7,79,5],[77,8,79,6],[77,15,79,13,"error"],[77,20,79,18],[77,22,79,20],[78,8,80,6,"console"],[78,15,80,13],[78,16,80,14,"error"],[78,21,80,19],[78,22,80,20],[78,48,80,46],[78,50,80,48,"error"],[78,55,80,53],[78,56,80,54],[79,8,81,6,"router"],[79,14,81,12],[79,15,81,13,"replace"],[79,22,81,20],[79,23,81,21],[79,31,81,29],[79,32,81,30],[80,6,82,4],[80,7,82,5],[80,16,82,14],[81,8,83,6,"setIsLoading"],[81,20,83,18],[81,21,83,19],[81,26,83,24],[81,27,83,25],[82,6,84,4],[83,4,85,2],[83,5,85,3],[84,4,87,2],[84,10,87,8,"login"],[84,15,87,13],[84,18,87,16,"login"],[84,19,87,16],[84,24,87,22],[85,6,88,4,"router"],[85,12,88,10],[85,13,88,11,"push"],[85,17,88,15],[85,18,88,16],[85,26,88,24],[85,27,88,25],[86,4,89,2],[86,5,89,3],[87,4,91,2],[87,10,91,8,"logout"],[87,16,91,14],[87,19,91,17],[87,25,91,17,"logout"],[87,26,91,17],[87,31,91,29],[88,6,92,4],[88,10,92,8],[89,8,93,6],[89,14,93,12,"api"],[89,17,93,15],[89,18,93,15,"default"],[89,25,93,15],[89,26,93,16,"post"],[89,30,93,20],[89,31,93,21],[89,45,93,35],[89,46,93,36],[90,6,94,4],[90,7,94,5],[90,8,94,6],[90,15,94,13,"error"],[90,20,94,18],[90,22,94,20],[91,8,95,6,"console"],[91,15,95,13],[91,16,95,14,"log"],[91,19,95,17],[91,20,95,18],[91,39,95,37],[91,41,95,39,"error"],[91,46,95,44],[91,47,95,45],[92,6,96,4],[93,6,98,4],[93,12,98,10,"AsyncStorage"],[93,24,98,22],[93,25,98,22,"default"],[93,32,98,22],[93,33,98,23,"removeItem"],[93,43,98,33],[93,44,98,34],[93,59,98,49],[93,60,98,50],[94,6,99,4],[94,13,99,11,"api"],[94,16,99,14],[94,17,99,14,"default"],[94,24,99,14],[94,25,99,15,"defaults"],[94,33,99,23],[94,34,99,24,"headers"],[94,41,99,31],[94,42,99,32,"common"],[94,48,99,38],[94,49,99,39],[94,64,99,54],[94,65,99,55],[95,6,100,4,"setUser"],[95,13,100,11],[95,14,100,12],[95,18,100,16],[95,19,100,17],[96,6,101,4,"router"],[96,12,101,10],[96,13,101,11,"replace"],[96,20,101,18],[96,21,101,19],[96,29,101,27],[96,30,101,28],[97,4,102,2],[97,5,102,3],[98,4,104,2],[98,24,105,4],[98,28,105,4,"_reactJsxDevRuntime"],[98,47,105,4],[98,48,105,4,"jsxDEV"],[98,54,105,4],[98,56,105,5,"AuthContext"],[98,67,105,16],[98,68,105,17,"Provider"],[98,76,105,25],[99,6,105,26,"value"],[99,11,105,31],[99,13,105,33],[100,8,105,35,"user"],[100,12,105,39],[101,8,105,41,"isLoading"],[101,17,105,50],[102,8,105,52,"login"],[102,13,105,57],[103,8,105,59,"logout"],[103,14,105,65],[104,8,105,67,"processSessionId"],[105,6,105,84],[105,7,105,86],[106,6,105,86,"children"],[106,14,105,86],[106,16,106,7,"children"],[107,4,106,15],[108,6,106,15,"fileName"],[108,14,106,15],[108,16,106,15,"_jsxFileName"],[108,28,106,15],[109,6,106,15,"lineNumber"],[109,16,106,15],[110,6,106,15,"columnNumber"],[110,18,106,15],[111,4,106,15],[111,11,107,26],[111,12,107,27],[112,2,109,0],[113,2,109,1,"_s"],[113,4,109,1],[113,5,24,16,"AuthProvider"],[113,17,24,28],[114,4,24,28],[114,12,27,17,"useRouter"],[114,23,27,26],[114,24,27,26,"useRouter"],[114,33,27,26],[114,35,28,19,"useSegments"],[114,46,28,30],[114,47,28,30,"useSegments"],[114,58,28,30],[115,2,28,30],[116,2,28,30,"_c"],[116,4,28,30],[116,7,24,16,"AuthProvider"],[116,19,24,28],[117,2,111,7],[117,11,111,16,"useAuth"],[117,18,111,23,"useAuth"],[117,19,111,23],[117,21,111,26],[118,4,111,26,"_s2"],[118,7,111,26],[119,4,112,2],[119,10,112,8,"context"],[119,17,112,15],[119,20,112,18],[119,24,112,18,"useContext"],[119,30,112,28],[119,31,112,28,"useContext"],[119,41,112,28],[119,43,112,29,"AuthContext"],[119,54,112,40],[119,55,112,41],[120,4,113,2],[120,8,113,6,"context"],[120,15,113,13],[120,20,113,18,"undefined"],[120,29,113,27],[120,31,113,29],[121,6,114,4],[121,12,114,10],[121,16,114,14,"Error"],[121,21,114,19],[121,22,114,20],[121,67,114,65],[121,68,114,66],[122,4,115,2],[123,4,116,2],[123,11,116,9,"context"],[123,18,116,16],[124,2,117,0],[125,2,117,1,"_s2"],[125,5,117,1],[125,6,111,16,"useAuth"],[125,13,111,23],[126,2,111,23],[126,6,111,23,"_c"],[126,8,111,23],[127,2,111,23,"$RefreshReg$"],[127,14,111,23],[127,15,111,23,"_c"],[127,17,111,23],[128,0,111,23],[128,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","processSessionId","login","logout","useAuth"],"mappings":"AAA;OCuB;YCM;GDE;YCE;GDU;oBEE;GFiB;2BGE;GHoB;gBIE;GJE;iBKE;GLW;CDO;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}